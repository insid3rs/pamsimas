<?xml version="1.0" ?>
<openerp>
    <data>

        <menuitem id="pamsimas_menu" name="Master Data" groups="group_pmu,group_firm"/>
        <menuitem id="pamsimas_menu_regional" name="Regional" parent="pamsimas_menu" groups="group_pmu"/>
        <menuitem id="pamsimas_menu_contract" name="Contract" parent="pamsimas_menu" groups="group_pmu"/>
        <menuitem id="pamsimas_menu_user" name="User" parent="pamsimas_menu" groups="group_pmu,group_firm"/>
        
        <menuitem id="pamsimas_menu_transaction" name="Transaction" />
		<menuitem id="pamsimas_menu_transaction_menu" name="Transaction" parent="pamsimas_menu_transaction" />
		
		<menuitem id="pamsimas_menu_report" name="Report" />
		<menuitem id="pamsimas_menu_report_menu" name="Report" parent="pamsimas_menu_report" />
		
        <!-- =========================User============================= -->
        
        <record model="ir.ui.view" id="firm_form_users_view" >
            <field name="name">res.users.form</field>
            <field name="model">res.users</field>
            <field name="type">form</field>
            <field name="inherit_id" ref="base.view_users_simple_form" />
            <field name="arch" type="xml">
            	<xpath expr="/form/sheet/div/field[@name='category_id']" position="before">
            		<separator />
	                <label for="login" string="Username" />
	                <field name="login" default_focus="1" placeholder="UserName" string="Username" />
	        		<label for="new_password" />
		            <field name="new_password" placeholder="Password" />
		            <separator />
				</xpath>
				<xpath expr="/form/sheet/group" position="before">
					<group>
						<group>
							<field name="receiver_name" />
							<field name="receiver_bank" />
			                <field name="receiver_bank_no"/>
			                <field name="thp"/>
						</group>
						<group>
							<field name="user_type" on_change="onchange_get_position(user_type)" domain="[('category_id.name', 'ilike', 'Pamsimas')]" required="True"/>
							<field name="position" on_change="onchange_get_office(position)" attrs="{'invisible': [('position','=', False)]}" />
			                <field name="office" options="{'create': false, 'create_edit': false}" attrs="{'invisible': [('position','=', False)]}" />
						</group>
					</group>
				</xpath>
				<xpath expr="/form/sheet/div/field[@name='category_id']" position="replace">
				</xpath>
				<xpath expr="/form/sheet/group/group/field[@name='website']" position="replace">
				</xpath>
            </field>
        </record>   
        
        <record model="ir.ui.view" id="firm_tree_users_view">
            <field name="name">res.users.tree</field>
            <field name="model">res.users</field>
            <field name="type">tree</field>
            <field name="inherit_id" ref="base.view_users_tree" /> 
            <field name="arch" type="xml">
            	<xpath expr="/tree/field[@name='name']" position="before">
            		<field name="user_type" />
            		<field name="office" />
				</xpath>
            	<xpath expr="/tree/field[@name='lang']" position="replace">
				</xpath>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="user_list_action">
            <field name="name">User</field>
            <field name="res_model">res.users</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>

        <menuitem id="pamsimas_menu_user_firm" name="User" parent="pamsimas_menu_user" action="user_list_action" />

        
		<!-- =========================ROMS============================= -->
       	<record model="ir.ui.view" id="roms_form_view">
            <field name="name">roms.form</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="ROMS Form" version="7.0">
                    <sheet>
                    	<group>
                    		<group string="Roms">
                    			<field name="name" on_change="update_detail(name,roms,'roms')"/>
                    			<field name="detail" invisible="1" />
                    			<field name="roms" on_change="update_detail(name,roms,'roms')" required="True" />
                    		</group>
                    		<group/>
                    	</group>
               			<notebook colspan="4">
                   			<page string="Description">
                       			<field name="description" nolabel="1" colspan="4" />
                   			</page>
               			</notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="roms_tree_view">
            <field name="name">roms.tree</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="ROMS Tree">
                	<field name="name" />
                    <field name="roms" />
                    <field name="description"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="roms_list_action">
            <field name="name">ROMS</field>
            <field name="res_model">pamsimas.regional</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('roms','!=',False),('province','=',False),('city','=',False)]</field>
		</record>
		
		<record model="ir.actions.act_window.view" id="roms_list_action_tree_view">
		    <field eval="1" name="sequence"/>
		    <field name="view_mode">tree</field>
		    <field name="view_id" ref="roms_tree_view"/>
		    <field name="act_window_id" ref="roms_list_action"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="roms_list_action_form_view">
		    <field eval="2" name="sequence"/>
		    <field name="view_mode">form</field>
		    <field name="view_id" ref="roms_form_view"/>
		    <field name="act_window_id" ref="roms_list_action"/>
		</record>

        <menuitem id="pamsimas_menu_regional_roms" name="ROMS" parent="pamsimas_menu_regional" action="roms_list_action"/>
        
        <!-- =========================Province============================= -->
       	<record model="ir.ui.view" id="province_form_view">
            <field name="name">province.form</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Province Form" version="7.0">
                	<sheet>
		             	<group>
		             		<group string="Province">
			             		<field name="name" on_change="update_detail(name,province,'province')"/>
			             		<field name="detail" invisible="1" />
			                    <field name="roms" />
			                    <field name="province" on_change="update_detail(name,province,'province')"/>
		                    </group>
		                    <group/>
		             	</group>
	                    <notebook colspan="4">
	                        <page string="Description">
	                            <field name="description" nolabel="1" colspan="4" />
	                        </page>
	                    </notebook>
		          	</sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="province_tree_view">
            <field name="name">province.tree</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Province Tree">
                    <field name="name" />
                    <field name="province" />
                    <field name="roms" />
                    <field name="description" />
                </tree>
            </field>
        </record>
        
        <record model="ir.actions.act_window" id="province_list_action">
            <field name="name">Province</field>
            <field name="res_model">pamsimas.regional</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('roms','!=',False),('province','!=',False),('city','=',False)]</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="province_list_action_tree_view">
		    <field eval="1" name="sequence"/>
		    <field name="view_mode">tree</field>
		    <field name="view_id" ref="province_tree_view"/>
		    <field name="act_window_id" ref="province_list_action"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="province_list_action_form_view">
		    <field eval="2" name="sequence"/>
		    <field name="view_mode">form</field>
		    <field name="view_id" ref="province_form_view"/>
		    <field name="act_window_id" ref="province_list_action"/>
		</record>
        
        <menuitem id="pamsimas_menu_regional_province" name="Province" parent="pamsimas_menu_regional" action="province_list_action"/>
        
        <!-- =========================City/Kabupaten============================= -->
       	<record model="ir.ui.view" id="city_form_view">
            <field name="name">city.form</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="City/Kabupaten Form" version="7.0">
                    <sheet>
                    	<group>
                    		<group string="City/Kabupatan">
	                    		<field name="name" on_change="update_detail(name,city,'city')"/>
			             		<field name="detail" invisible="1" />
			                    <field name="roms" />
			                    <field name="province" />
			                    <field name="city" on_change="update_detail(name,city,'city')"/>
                    		</group>
                    		<group/>
                    	</group>
	                    <notebook colspan="4">
	                        <page string="Description">
	                            <field name="description" nolabel="1" colspan="4" />
	                        </page>
	                    </notebook>
                    </sheet>
                    
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="city_tree_view">
            <field name="name">city.tree</field>
            <field name="model">pamsimas.regional</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="City/Kabupaten Tree">
                    <field name="name" />
                    <field name="city" />
                    <field name="roms" />
                    <field name="province" />
                    <field name="description" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="city_list_action">
            <field name="name">City/Kabupaten</field>
            <field name="res_model">pamsimas.regional</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[('roms','!=',False),('province','!=',False),('city','!=',False)]</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="city_list_action_tree_view">
		    <field eval="1" name="sequence"/>
		    <field name="view_mode">tree</field>
		    <field name="view_id" ref="city_tree_view"/>
		    <field name="act_window_id" ref="city_list_action"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="city_list_action_form_view">
		    <field eval="2" name="sequence"/>
		    <field name="view_mode">form</field>
		    <field name="view_id" ref="city_form_view"/>
		    <field name="act_window_id" ref="city_list_action"/>
		</record>
		
        <menuitem id="pamsimas_menu_regional_city" name="City/Kabupaten" parent="pamsimas_menu_regional" action="city_list_action"/>
        
        
        <!-- =========================Contract============================= -->
       	<record model="ir.ui.view" id="contract_form_view">
            <field name="name">contractitem.form</field>
            <field name="model">pamsimas.contractitem</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Contract Form" version="7.0">
                	<sheet>
                		<group>
                			<group string="Contract">
                				<field name="name" invisible="1"/>
	                			<field name="contract" on_change="update_detail(contract,subcontract)"/>
		                    	<field name="subcontract" on_change="update_detail(contract,subcontract)"/>
		                    	<field name="unit" />
		                    	<field name="read_only" />
	                    	</group>
	                    	<group/>
                		</group>
	                    <notebook colspan="4">
	                        <page string="Description">
	                            <field name="description" nolabel="1" colspan="4" />
	                        </page>
	                    </notebook>
                	</sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="contract_tree_view">
            <field name="name">contractitem.tree</field>
            <field name="model">pamsimas.contractitem</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Contract Tree">
                    <field name="contract" />
                    <field name="subcontract" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="contract_list_action">
            <field name="name">Contract Item</field>
            <field name="res_model">pamsimas.contractitem</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
        </record>
        <menuitem id="pamsimas_menu_contract_item" name="Contract Item" parent="pamsimas_menu_contract" action="contract_list_action"/>
        
        <!-- =========================Transfer============================= -->
        <record model="ir.ui.view" id="transfer_form_view">
            <field name="name">transfer.form</field>
            <field name="model">pamsimas.transfer</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Transfer Form" version="7.0">
                    <header>
                		<field name="state" widget="statusbar" statusbar_visible="draft,confirmed" statusbar_colors='{"draft":"red", "confirmed":"red"}'/>
                    </header>
                    <sheet>
                    	<group string="Transfer Details" colspan="2">
	                    	<group>
	                    		<field name="name" />
	                    		<field name="sender_id"/>
	                    	</group>
                    		<group/>
                    	</group>
                    	<group>
                    		<group>
                    			<field name="date" />
                    			<field name="position" on_change="onchange_get_office(position)"/>
			                    <field name="office" on_change="onchange_get_officer(office)" options="{'create': false, 'create_edit': false}" />
			                    <field name="officer_name" on_change="onchange_get_officer_user(officer_name)" required="True" domain="[('name', '=', '')]" options="{'create': false, 'create_edit': false}"/>
                    			<field name="thp" readonly="True"/>
                    		</group>
	                    	<group>
			                    <field name="receiver_bank" />
			                    <field name="receiver_name" />
			                    <field name="receiver_bank_no" />
			                    <field name="transfer_amount"/>
	                    	</group>
                    	</group>
                    	<notebook attrs="{'invisible':[('state','==','draft')]}">
                    		<page string="Transfer Confirmation"  >
                    			<group string="Transfer Confirmation" colspan="2" >
                    				<field name="transfer_received_date" colspan="2" />
                   					<field name="transfer_received" colspan="2"/>
                    			</group>
                    		</page>
                    	</notebook>
                    	<notebook>
	                    	<page string="Kontrak">
		                        <field name="transfer_contract_ids" nolabel="1">
		                        	<form string="contract" version="7.0">
		                        		<group>
		                        			<field name="name" />
		                            		<field name="quantity" on_change="update_total_value(quantity,contract_value)"/>
		                            		<field name="unit" readonly="True"/>
		                            		<field name="contract_value" on_change="update_total_value(quantity,contract_value)"/>
		                            		<field name="received_contract_value" readonly="True"/>
		                            	</group>
		                            </form>
		                            <tree string="Contract" editable="bottom">
		                                <field name="name" on_change="update_contract_detail(name)"/>
		                                <field name="quantity"/>
		                                <field name="unit" readonly="True" />
		                                <field name="contract_value"/>
		                                <field name="received_contract_value" readonly="True"/>
		                            </tree>
		                        </field>
		                	</page>
	                    </notebook>
                    </sheet>
                </form>
            </field>
        </record>

        <record model="ir.ui.view" id="transfer_tree_view">
            <field name="name">transfer.tree</field>
            <field name="model">pamsimas.transfer</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Transfer Tree">
                	<field name="state" />
                	<field name="name" />
                    <field name="date" />
                    <field name="office" />
                    <field name="receiver_name" string="name"/>
                    <field name="receiver_bank" />
                    <field name="receiver_bank_no" string="Account No"/>
                    <field name="transfer_amount" string="Transfer Sent"/>
                    <field name="transfer_received" string="Transfer Confirmed"/>
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="transfer_list_action">
            <field name="name">Transfer</field>
            <field name="res_model">pamsimas.transfer</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="transfer_list_action_tree_view">
		    <field eval="1" name="sequence"/>
		    <field name="view_mode">tree</field>
		    <field name="view_id" ref="transfer_tree_view"/>
		    <field name="act_window_id" ref="transfer_list_action"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="transfer_list_action_form_view">
		    <field eval="2" name="sequence"/>
		    <field name="view_mode">form</field>
		    <field name="view_id" ref="transfer_form_view"/>
		    <field name="act_window_id" ref="transfer_list_action"/>
		</record>

        <menuitem id="pamsimas_menu_transaction_menu_transfer" name="Transfer" parent="pamsimas_menu_transaction_menu" action="transfer_list_action" groups="group_firm,group_pmu"/>
		
		<!-- =========================Transfer Confirmation============================= -->
        <record model="ir.ui.view" id="transferconfirmation_form_view">
            <field name="name">transferconfirmation.form</field>
            <field name="model">pamsimas.transfer</field>
            <field name="type">form</field>
            <field name="arch" type="xml">
                <form string="Transfer Confirmation Form" version="7.0" create="false">
                	<header>
                		<field name="state" widget="statusbar" statusbar_visible="draft, confirmed" statusbar_colors='{"draft":"red", "confirmed":"blue"}'/>
                		<button name="print_report" type="object" string="print report" icon="gtk-print" />
                		<button name="transfer_confirm" string="Confirm Transaction" type="object" class="oe_highlight" attrs="{'invisible':[('transfer_received','=',0)]}" />
                		<button name="confirm" states="comment" string="Confirm Transaction" type="workflow" class="oe_highlight"/>
                	</header>
                    <sheet>
                    	<group string="Transfer Details">
	                    	<group>
	                    		<field name="name" readonly="True"/>
	                    		<field name="temp_office" />
	                    	</group>
                    		<group/>
                    	</group>
                    	<group>
                    		<group>
                    			<field name="date" readonly="True"/>
                    			<field name="position" readonly="True"/>
			                    <field name="office" readonly="True"/>
			                    <field name="thp" readonly="True"/>
                    		</group>
	                    	<group>
			                    <field name="receiver_bank" readonly="True"/>
			                    <field name="receiver_name" readonly="True"/>
			                    <field name="receiver_bank_no" readonly="True"/>
	                    	</group>
                    	</group>
                    	<notebook>
                    		<page string="Transfer Confirmation"  >
                    			<group string="Transfer Confirmation" colspan="2" >
                    				<field name="transfer_received_date" colspan="2" attrs="{'required':[('state','==','draft')]}"/>
                   					<field name="transfer_received" colspan="2" attrs="{'required':[('state','==','draft')]}"/>
                    			</group>
                    		</page>
                    	</notebook>
                    	<notebook >
	                    	<page string="Kontrak">
		                        <field name="transfer_contract_ids" nolabel="1">
		                        	<form string="contract" version="7.0">
		                        		<group>
		                        			<field name="name" options="{'create': false, 'create_edit': false}"/>
		                            		<field name="quantity" on_change="update_total_value(quantity,contract_value)"/>
		                            		<field name="unit" readonly="True" />
		                            		<field name="received_contract_value" on_change="update_total_value(quantity,contract_value)"/>
		                            	</group>
		                            </form>
		                            <tree string="Contract" editable="bottom">
		                                <field name="name" />
		                                <field name="quantity"/>
		                                <field name="unit" readonly="True" />
		                                <field name="received_contract_value"/>
		                            </tree>
		                        </field>
		                	</page>
	                    </notebook>
                    </sheet>
                </form>
            </field>
        </record>
        
        
        <record model="ir.ui.view" id="transferconfirmation_tree_view">
            <field name="name">transferconfirmation.tree</field>
            <field name="model">pamsimas.transfer</field>
            <field name="type">tree</field>
            <field name="arch" type="xml">
                <tree string="Transfer Confirmation Tree">
                    <field name="state" />
                	<field name="name" />
                    <field name="transfer_received_date" />
                    <field name="office" />
                    <field name="receiver_name" string="name"/>
                    <field name="receiver_bank" />
                    <field name="receiver_bank_no" string="Account No"/>
                    <field name="transfer_received" />
                </tree>
            </field>
        </record>

        <record model="ir.actions.act_window" id="transferconfirmation_list_action">
            <field name="name">Transfer Confirmation</field>
            <field name="res_model">pamsimas.transfer</field>
            <field name="view_type">form</field>
            <field name="view_mode">tree,form</field>
            <field name="domain">[]</field>
        </record>
        
        <record model="ir.actions.act_window.view" id="transferconfirmation_list_action_tree_view">
		    <field eval="1" name="sequence"/>
		    <field name="view_mode">tree</field>
		    <field name="view_id" ref="transferconfirmation_tree_view"/>
		    <field name="act_window_id" ref="transferconfirmation_list_action"/>
		</record>
		
		<record model="ir.actions.act_window.view" id="transferconfirmation_list_action_form_view">
		    <field eval="2" name="sequence"/>
		    <field name="view_mode">form</field>
		    <field name="view_id" ref="transferconfirmation_form_view"/>
		    <field name="act_window_id" ref="transferconfirmation_list_action"/>
		</record>
        
        <menuitem id="pamsimas_menu_transaction_menu_transferconfirmation" name="Transfer Confirmation" parent="pamsimas_menu_transaction_menu" action="transferconfirmation_list_action" groups="group_regional,group_pmu"/>
		
		<menuitem id="pamsimas_menu_report_menu_regional" name="Report Regional" parent="pamsimas_menu_report_menu" action="action_pamsimas_regional_report"/>
		<menuitem id="pamsimas_menu_report_menu_firm" name="Report Firm" parent="pamsimas_menu_report_menu" action="user_list_action"/>
		<menuitem id="pamsimas_menu_report_menu_pmu" name="Report PMU" parent="pamsimas_menu_report_menu" action="user_list_action"/>
		
		
    </data>
</openerp>
